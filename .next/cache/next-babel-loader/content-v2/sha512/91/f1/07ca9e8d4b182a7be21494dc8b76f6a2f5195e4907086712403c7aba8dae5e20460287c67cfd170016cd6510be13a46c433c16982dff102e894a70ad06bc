{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect } from \"react\";\nimport classes from \"./contact-form.module.css\";\nimport Notification from \"../ui/notification\";\n\nasync function sendContextData(contactDetails) {\n  // We could use some validation before sending the info but we won't now as it's not the important on this study case\n  const response = await fetch(\"api/contact\", {\n    method: \"POST\",\n    body: JSON.stringify(contactDetails),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || \"Something went wrong!\");\n  }\n}\n\nfunction ContactForm() {\n  const {\n    0: enteredEmail,\n    1: setEnteredEmail\n  } = useState(\"\");\n  const {\n    0: enteredName,\n    1: setEnteredName\n  } = useState(\"\");\n  const {\n    0: enteredMessage,\n    1: setEnteredMessage\n  } = useState(\"\");\n  const {\n    0: requestStatus,\n    1: setRequestStatus\n  } = useState(); // \"pending\", \"success\" or \"error\"\n\n  const {\n    0: requestError,\n    1: setRequestError\n  } = useState();\n  useEffect(() => {\n    if (requestStatus === \"pending\" || requestStatus === \"error\") {\n      const timer = setTimeout(() => {\n        setRequestStatus(null);\n        setRequestError(null);\n      }, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [requestStatus]);\n\n  async function sendMessageHandler(event) {\n    event.preventDefault();\n    setRequestStatus(\"pending\");\n\n    try {\n      await sendContextData({\n        email: enteredEmail,\n        name: enteredName,\n        message: enteredMessage\n      });\n      setRequestStatus(\"success\");\n      setEnteredMessage(\"\");\n      setEnteredEmail(\"\");\n      setEnteredName(\"\");\n    } catch (error) {\n      setRequestError(error.message);\n      setRequestStatus(\"error\");\n    }\n  }\n\n  let notification;\n\n  if (requestStatus === \"pending\") {\n    notification = {\n      status: \"pending\",\n      title: \"Sending message...\",\n      message: \"Your message is on its way!\"\n    };\n  } else if (requestStatus === \"success\") {\n    notification = {\n      status: \"success\",\n      title: \"Success.\",\n      message: \"Message sent successfully!\"\n    };\n  } else if (requestStatus === \"error\") {\n    notification = {\n      status: \"error\",\n      title: \"Error1\",\n      message: requestError\n    };\n  }\n\n  return /*#__PURE__*/_jsxs(\"section\", {\n    className: classes.contact,\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: \"How can I help you?\"\n    }), /*#__PURE__*/_jsx(\"form\", {\n      className: classes.form,\n      onSubmit: sendMessageHandler,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.controls,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: classes.control,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"email\",\n            children: \"Your Email\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            required: true,\n            value: enteredEmail,\n            onChange: event => setEnteredEmail(event.target.value)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.control,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"name\",\n            children: \"Your Name\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            id: \"name\",\n            required: true,\n            value: enteredName,\n            onChange: event => setEnteredName(event.target.value)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.control,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"message\",\n            children: \"Your message\"\n          }), /*#__PURE__*/_jsx(\"textarea\", {\n            id: \"message\",\n            rows: \"5\",\n            value: enteredMessage,\n            onChange: event => setEnteredMessage(event.target.value)\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.actions,\n          children: /*#__PURE__*/_jsx(\"button\", {\n            children: \"Send Message\"\n          })\n        })]\n      })\n    }), notification && /*#__PURE__*/_jsx(Notification, {\n      status: notification.message.status,\n      title: notification.title,\n      message: notification.message\n    })]\n  });\n}\n\nexport default ContactForm;","map":null,"metadata":{},"sourceType":"module"}